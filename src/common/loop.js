
console.log('golb1'); // 1
setImmediate(function () { // 宏任务队列1
  console.log('immediate1');  // 9
  process.nextTick(function () {
    console.log('immediate1_nextTick'); // 11
  })
  new Promise(function (resolve) {
    console.log('immediate1_promise'); // 10
    resolve();
  }).then(function () {
    console.log('immediate1_then') // 12
  })
})
setTimeout(function () { // 宏任务队列2
  console.log('timeout1'); // 5
  process.nextTick(function () {
    console.log('timeout1_nextTick'); // 7
  })
  new Promise(function (resolve) {
    console.log('timeout1_promise'); // 6
    resolve();
  }).then(function () {
    console.log('timeout1_then') // 8
  })
  setTimeout(function () {
    console.log('timeout1_timeout1'); // 13
    process.nextTick(function () {
      console.log('timeout1_timeout1_nextTick'); // 14
    })
    setImmediate(function () {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
      console.log('timeout1_setImmediate1'); // 15
    })
  });
})
new Promise(function (resolve) {
  console.log('glob1_promise'); //2
  resolve();
}).then(function () {
  console.log('glob1_then') // 微任务1后执行  4
})
process.nextTick(function () {
  console.log('glob1_nextTick'); // 微任务2先执行 3
})
